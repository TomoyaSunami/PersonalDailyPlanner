# 📘 ワイヤーフレーム仕様書（最新実装ベース）

## 0. 画面構造のキーポイント
- 単一画面（`todayView`）で週ストリップと月カレンダーを同一領域にトグル表示（週⇔月）。
- 日付操作（上部）とリスト操作（下部）は分離しつつ同じデータを共有。初期は週表示＋今日選択。
- 予定／タスクリストは共通表示。日付変更は週ストリップ／カレンダーいずれからも同期。
- 追加ボタンの配色：予定＝シアン系グラデ、タスク＝グリーン系グラデ。
- 折り畳みトグルはシンプルアイコン（▾／▸）で背景なし。今日強調は週・月ともシアン枠（2px）。
- タスク期日入力は廃止し、選択日ベースで保存。タスク行右端はゴミ箱アイコンの削除チップのみ。

---

## 1. メイン画面（選択日ビュー）
*週⇔月をトグルしながら、選択日の予定・タスクを操作する単一画面。初期は週表示で今日が選択され、切替後も選択日は保持。追加・削除・チェックは即時ローカル保存。*

```
┌─────────────────────────────────────────┐
│  日付ヘッダー         [週｜月]トグル（右上）                   │
│  例) 2025年11月26日(水)                                    │
├─────────────────────────────────────────┤

  週ストリップ（週モード） / 月カレンダー（月モード）
  ・週モード：Sun start、今日セルはシアン枠、予定=青ドット、タスク=緑四角
  ・月モード：今日セルはシアン枠、予定=青ドット、タスク=緑四角、両方ある日は並列で重ならない
  ← prevWeek / 今週範囲 / nextWeek →   （週モード）
  ← prevMonth / 月表示 / nextMonth →    （月モード）
  ・右上「週｜月」トグルでフェード＋スライド切替。ラッパー高さがアニメーションして下のリストを押し下げる（6週表示でも見切れない）。
  ・トグルは month-mode で強調、スクロール位置は維持。切替後も選択日・週開始が同期され、追加モーダル初期日付にも反映。

─────────────────────────────────────────

  ▾ 予定（折り畳みトグル：▾／▸、黒）
  ───────────────────────────────────
  09:00  チームMTG（Zoom）
  13:00  客先レビュー
  18:00  ジム
  ＋ 予定を追加  （シアン系グラデボタン）
  ・時間昇順、終日は末尾。各行右端で削除可。ホバーで軽いリフト演出。
  ・行構成：左=時間バッジ（終日は「終日」）、中央=タイトル＋メモ、右=削除チップ。

─────────────────────────────────────────

  ▾ タスク    [完了数表示 x/y]（折り畳みトグル：▾／▸、黒）
  ───────────────────────────────────
  □ レポートの下書き
  □ 買い物（牛乳）
  ☑ 上司への返信（完了は薄表示＋打消し線）
  ＋ タスクを追加（グリーン系グラデボタン）
  ・行全体クリックで編集モーダルを開く。チェック切替は左のチェックボックスのみ。
  ・完了済もリストに残し、進捗 x/y にカウント。選択日でフィルタ。
  ・行構成：左=チェックボックス、中央=タイトル＋メモ、右=ゴミ箱アイコンの削除チップ。期日バッジは表示しない。ホバーで軽いリフト。
```

### インジケーター
- 週ストリップ：予定＝青丸ドット、タスク＝緑四角。両方ありは同時表示。
- カレンダー：予定＝青ドット（`.dot.event`）、タスク＝緑四角（`.dot.task`）。両方ありは並置。
- 「今日」強調は週／月とも2pxシアン枠＋薄いシアン背景（同じ設定で統一）。選択日は枠色で判別（太字なし）。

### トグル挙動
- 右上の「週｜月」で同一領域をフェード＋スライド切替（初期：週）。
- トグル時にラッパー高さをアニメーション。表示中要素の scrollHeight をJSで反映し、6週でも収まる。
- 切替後も選択日は維持され、週／月どちらのクリックでも予定・タスクに即反映。
- active-month クラスでトグル強調。切替時はリストのスクロール位置は固定。

### 入力と操作
- 予定追加：タイトル／日付ピッカー／任意時間／任意メモ。保存後即反映。
- タスク追加：タイトル／任意メモのみ。選択日を期日として保存し、保存後即反映。
- タスクは左チェックで完了トグル、行クリックで編集モーダル。完了後も残し、進捗 x/y に含める。
- 追加ボタン色分け：予定＝シアン系グラデ、タスク＝グリーン系グラデ。
- 週ストリップの日付クリック→選択日変更→ヘッダー/リスト即同期。
- カレンダー日付クリック→選択日同期＋週開始更新。追加モーダルのデフォルト日付は選択日（未指定は今日）。
- モーダルは閉じるボタン/背景クリックでクローズ。送信後はフィールドリセット。
- 予定行クリックで編集モーダル、右端削除チップで削除。タスク行も同様に右端ゴミ箱で削除。

---

## 2. モーダル
### タスク追加モーダル
```
┌──────────────────────────┐
│  タスクを追加                        │
├──────────────────────────┤
  タイトル
  メモ（任意）
  ● 作成
```

### タスク編集モーダル
```
┌──────────────────────────┐
│  タスクを編集                        │
├──────────────────────────┤
  タイトル
  メモ（任意）
  ● 更新
```

### 予定追加モーダル
```
┌──────────────────────────┐
│  予定を追加                         │
├──────────────────────────┤
  タイトル
  日付（ピッカー）
  時間（任意）
  メモ（任意）
  ● 保存
```

### 予定編集モーダル
```
┌──────────────────────────┐
│  予定を編集                         │
├──────────────────────────┤
  タイトル
  日付（ピッカー）
  時間（任意）
  メモ（任意）
  ● 更新
```

---

## 3. スタイル要点
- ガラスモーフィズム：半透明カード＋ぼかし＋淡い枠線。
- トグル・チップ：背景透明（トグルは黒字）、共通チップは半透明白＋枠。
- ボタン：予定=シアン系グラデ、タスク=グリーン系グラデ、ホバーで色濃く。
- 見出し余白：カレンダー/週ストリップ直下に小さな余白、その他は詰め気味。
- 折り畳みトグルは文字なしアイコン（▾/▸）、背景なし、少し大きめ（1.2em）。

---

## 4. ルールサマリ
- 単一ビューで週/月を切替、予定・タスクは共通リスト。
- 今日強調をシアン枠で統一（週・月とも2px）。
- 折り畳みトグルはシンプルなアイコン、背景なし。
- タスクは完了後も表示し、件数進捗をヘッダーに表示。完了は薄表示＋打消し線。期日入力・バッジなし。
- 予定・タスクは行クリックで編集、右端チップで削除。チェック切替はタスク行左のチェックのみ。
- 追加・削除・チェックはローカルストレージへ即保存し、再読込でも状態を保持。
