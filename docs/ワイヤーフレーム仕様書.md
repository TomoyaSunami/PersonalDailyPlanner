# 📘 ワイヤーフレーム仕様書（最新実装ベース）

## 0. 画面構造のキーポイント
- 単一画面（`todayView`）で「日付ヘッダー＋週ストリップ＋カレンダーポップオーバー」「予定」「タスク」を縦積み。選択日は週ストリップ／カレンダー操作で常に同期。
- 日付ラベルは選択日=今日なら「今日」、それ以外は `YYYY年M月D日(曜)`。週範囲ラベルは固定幅計測（サンプル `0000年00月00日 〜 0000年00月00日`）で左右矢印の位置を安定させる。
- カレンダーはヘッダーのカレンダーアイコンで開閉するポップオーバー。外側クリック・Escで閉じ、日付クリックで選択日を更新して閉じる。
- 予定／タスクは同一カード内の折り畳みセクション。追加・編集・削除・完了トグルは即時ローカルストレージ（`dayflow-data`）に保存し、初回のみシードデータを投入。
- 追加ボタン配色：予定＝シアン系グラデ、タスク＝グリーン系グラデ。主要操作（ボタン／日付セル／チェックボックス）はフォーカスリングを統一。

---

## 1. メイン画面（選択日ビュー）
*選択日の予定・タスクを週ストリップとカレンダーで切り替えながら操作する単一画面。*

```
┌ hero（コピー＋サブテキスト）
├ 日付ヘッダー： [今日 or 日付] [カレンダーアイコン]
│   └ ポップオーバー：月ラベル＋←/→、曜日ヘッダ、月グリッド
│      ・予定=青ドット、タスク=緑四角、今日=シアン枠
├ 週コントロール： ← [週範囲 固定幅] →
├ 週ストリップ：日〜土チップ（予定=ドット／タスク=四角、today=シアン枠、active=選択日）
├ ▾ 予定（折り畳み）
│   行: 時刻/終日・タイトル・メモ(任意)・右端削除チップ
│   並び: 時刻昇順（未指定は終日扱い）
│   ＋ 予定を追加（シアン系グラデ）
├ ▾ タスク（折り畳み・進捗バッジ x/y）
│   行: チェックボックス・タイトル・メモ・右端削除チップ
│   並び: 未完→完了。完了は薄表示＋打消し線
│   ＋ タスクを追加（グリーン系グラデ）
└ モーダル: 予定追加/編集・タスク追加/編集
```

### インタラクション
- 週矢印：±7日移動し、週範囲ラベルは固定幅で揺れない。
- 週チップ：クリックで選択日変更。todayはシアン枠＋薄いシアン背景、activeはアクセント色枠。
- カレンダー：ヘッダー矢印で月移動。日クリックで選択日更新＋ポップオーバーを閉じる。
- 折り畳み：▾/▸でセクションを開閉。閉じるとリストと「追加」ボタンを隠す。
- 予定行：クリックで編集モーダル、右端削除チップで削除。時刻未指定は「終日」表示。
- タスク行：左チェックで完了トグル、行クリックで編集（チェック入力を除く）。完了済もリストに残し進捗に計上。
- 進捗表示：当日タスクの完了数/総数をヘッダー右に表示。
- 追加ボタン：現在の選択日を初期値としてモーダルを開く（指定がなければ今日）。

---

## 2. モーダル
### タスク追加 / 編集
- フィールド：タイトル（必須、placeholder「タイトルを入力」）、メモ（任意、placeholder「メモを入力」）。
- 保存時：選択日または指定ターゲット日を `date` に保存。追加は新規作成、編集はタイトル・メモを更新。完了フラグはチェックボックス操作のみで変更。
- クローズ：✕ボタン、背景クリック、送信完了で閉じ、フォームをリセット。

### 予定追加 / 編集
- フィールド：タイトル（必須、placeholder「タイトルを入力」）、日付（必須、date入力）、時間（任意、time入力）、メモ（任意、placeholder「Zoom」）。
- 保存時：追加は新規作成、編集は title/date/time/memo を上書き。日付は必須、時間/メモは任意。
- クローズ：✕ボタン、背景クリック、送信完了で閉じ、フォームをリセット。

---

## 3. スタイル要点
- 背景：ラジアル＋リニアの淡いグラデーション。カードはガラスモーフィズム（半透明＋ぼかし＋淡い枠＋影）。
- 主要ボタン：グラデ塗り、ホバーでわずかにリフト。`.primary-btn/.ghost-btn/.icon-btn/.calendar-cell/.day-chip` に共通フォーカスリング。
- 週矢印：ホバーでリフト影（アイテムと同じ `0 12px 28px rgba(15, 23, 42, 0.08)`）、クリック中は押し込み影。
- 週範囲ラベル：`font-variant-numeric: tabular-nums`、JSでサンプル幅計測し固定幅を付与。
- チェックボックス：ポインターカーソル、ホバーで枠強調（box-shadow）、`:focus-visible` でリング。
- リスト行：ホバーで軽いリフト。完了タスクは不透明度低＋打消し線。
- カレンダー：予定ドット=青、タスク四角=緑。today=シアン枠、active=アクセント色枠。

---

## 4. ルールサマリ
- すべての操作はローカルストレージ（`dayflow-data`）に即保存。データがない場合のみサンプル予定/タスクを投入。
- 選択日は週ストリップ・カレンダー・モーダルの初期日で共有。選択日=今日ならヘッダーラベルは「今日」。
- 予定：選択日一致でフィルタし、時刻昇順。時間未指定は「終日」表示。
- タスク：選択日でフィルタし、未完→完了順。完了済も残す。
- 削除は行右端のゴミ箱チップ。行クリック=編集（予定・タスク）、チェックボックス=完了トグル（タスク）。
