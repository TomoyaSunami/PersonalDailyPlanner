# E2Eのテスト評価仕様書（Daily Canvas）

## 1. 目的
- 選択日中心の体験と「週/月切替」「予定・タスク統合」の主要シナリオが、実機ブラウザで破綻なく動作することを確認する。
- UIアニメーション（特に週/月切替の高さ遷移）が意図どおりに同期しているかを評価する。

## 2. 対象範囲
- 対象：`index.html` に実装された Today View（週ストリップ、月カレンダー、予定リスト、タスクリスト、モーダル CRUD、折り畳み）。
- 非対象：外部連携（なし）、通知機能（未実装）。

## 3. 環境
- ブラウザ：最新 Chrome / Edge（デスクトップ）。補足確認として iOS Safari/Android Chrome の表示崩れ有無を確認。
- ビューポート：デスクトップ 1440px、タブレット 1024px、モバイル 390px。
- ストレージ：localStorage 初期化状態と既存データ状態の両方で実施。

## 4. 評価観点（パス条件の軸）
- UX：切替・追加・編集が 1 秒以内に反映され、フォーカス喪失やスクロールジャンプがない。
- 表示整合：選択日・週レンジ・月ラベルが常に一致している。
- アニメーション：週↔月切替時に高さが連続的に遷移し、コンテンツのフェード/スライドが途中で途切れない。
- データ整合：localStorage に保存・再読み込み後も同じ表示状態が再現される。

## 5. テストシナリオ
- **S01 週→月切替の高さ遷移**
  1. 初期表示（週表示）で週ストリップ高さを目視確認。
  2. 「週/月」トグルを月に切替。
  3. 高さが連続的に伸縮し、月カレンダーがフェード/スライドで表示されること。ジャンプや空白表示がないこと。
  4. 月→週に戻す。逆方向でも同様に高さが連続し、コンテンツが交差表示しないこと。
- **S02 週・月のラベル/選択同期**
  1. 週ストリップで任意の日付をクリック。
  2. Todayラベル・週レンジが選択日に一致すること。
  3. 月ビューへ切替。該当日がアクティブ強調されていること。
  4. 月で別日を選択し週に戻すと、週ストリップのアクティブ日と週レンジが更新されていること。
- **S03 予定の追加・編集・削除**
  1. 「予定を追加」でタイトル/日付/時間/メモを入力し保存。
  2. リストに即時反映され、クリックで編集モーダルが開くこと。
  3. 編集内容が保存され、削除ボタンで除去されること。
  4. 再読み込み後も状態が保持されること。
- **S04 タスクの追加・完了・編集・削除**
  1. 「タスクを追加」でタイトル/メモを入力し保存。
  2. リストに表示され、チェックで完了状態が切り替わること。
  3. 進捗カウンター（完了数/総数）が即時更新されること。
  4. 編集・削除が動作し、再読み込み後も整合すること。
- **S05 折り畳み動作**
  1. 予定・タスク各セクションのトグルを押下。
  2. コンテンツが非表示になるが、ヘッダと進捗表示は維持されること。
  3. 再展開で元のリストが表示されること。
- **S06 週ナビゲーション**
  1. 週ストリップの「←」「→」で 7 日単位に移動する。
  2. 週レンジと日付ボタンが正しく更新されること。
  3. 月ビューへ切替後、「←」「→」で月ラベルが前後月に更新されること。
- **S07 今日ハイライト**
  1. 週ストリップと月カレンダーで本日が強調表示されること。
  2. 日付選択を変更後も Today ハイライトは残り、アクティブ強調とは別に表示されること。
- **S08 モーダル UX**
  1. 予定/タスク作成・編集モーダルが開閉できること。
  2. バツボタン/背景クリック/保存後に閉じること。
  3. フォーム未入力で保存できず、必須フィールドが明示されること。
- **S09 レスポンシブ表示**
  1. 1440/1024/390px で表示崩れがないこと。
  2. トグルやボタンが画面外に出ないこと。
- **S10 localStorage 挙動**
  1. データ作成後にリロードして保持されること。
  2. localStorage をクリアするとシードデータで初期化されること。

## 6. 回帰観点（重点）
- 週↔月切替時の高さ・フェードが同一フレームで始まること。
- 選択日の同期（Todayラベル、週レンジ、月アクティブ）にズレがないこと。
- 追加/削除後の再描画でイベントリスナーが二重登録されないこと（重複反応なし）。

## 7. 不具合報告フォーマット
- タイトル／発生バージョン／環境（ブラウザ・ビューポート・OS）
- 再現手順（ステップ番号付き）
- 期待結果／実際結果（スクリーンショット or 動画）
- 影響範囲（機能・ユーザー影響）／暫定回避策の有無

## 8. Exit基準
- 全シナリオ（S01〜S10）が主要ブラウザでパス。
- 高さ遷移・表示同期に関する重大/高優先バグが 0 件。
